<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø±Ø´ÙØ© Ø§Ù„Ø°ÙƒÙŠ - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --success: #00b894;
            --danger: #d63031;
            --dark: #2d3436;
            --glass: rgba(255, 255, 255, 0.9);
        }

        * { transition: all 0.3s ease; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #4e54c8;
            background: -webkit-linear-gradient(to right, #8f94fb, #4e54c8);
            background: linear-gradient(to right, #8f94fb, #4e54c8);
            overflow-x: hidden;
        }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ --- */
        #authSection {
            width: 100%;
            max-width: 400px;
            perspective: 1000px;
        }

        .auth-card {
            background: var(--glass);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            text-align: center;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .auth-card h2 { color: var(--primary); margin-bottom: 30px; }

        .input-group { position: relative; margin-bottom: 20px; }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            outline: none;
            font-size: 15px;
        }

        .input-group input:focus { border-color: var(--primary); box-shadow: 0 0 10px rgba(78, 84, 200, 0.2); }

        .btn-main {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(78, 84, 200, 0.3);
        }

        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(78, 84, 200, 0.4); }

        .toggle-link { margin-top: 20px; display: block; color: #666; cursor: pointer; font-size: 14px; }
        .toggle-link:hover { color: var(--primary); text-decoration: underline; }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
        #mainContainer {
            display: none;
            width: 95%;
            max-width: 1100px;
            background: var(--glass);
            margin: 20px;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            backdrop-filter: blur(15px);
            animation: fadeInDown 0.8s;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            border-bottom: 2px solid rgba(0,0,0,0.05);
            padding-bottom: 20px;
        }

        .tool-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.03);
            margin-bottom: 30px;
        }

        .search-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .search-wrapper input {
            flex: 1;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #eee;
            font-size: 16px;
        }

        .btn-search {
            padding: 0 30px;
            background: var(--dark);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
        }

        .btn-search:hover { background: var(--primary); }

        /* --- Ø§Ù„Ø¬Ø¯ÙˆÙ„ --- */
        table { width: 100%; border-collapse: separate; border-spacing: 0 15px; }
        th { padding: 15px; text-align: right; color: #777; font-weight: 500; }
        td { background: white; padding: 20px; border-radius: 0; }
        td:first-child { border-radius: 0 15px 15px 0; }
        td:last-child { border-radius: 15px 0 0 15px; }

        tr:hover td { transform: scale(1.01); box-shadow: 0 5px 15px rgba(0,0,0,0.05); cursor: pointer; }

        .seq-badge {
            background: var(--primary);
            color: white;
            padding: 5px 12px;
            border-radius: 10px;
            font-weight: bold;
        }

        .action-btns button {
            margin-left: 5px;
            padding: 8px 15px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }
    </style>
</head>
<body>

<div id="authSection" class="animate__animated animate__zoomIn">
    <div class="auth-card" id="loginBox">
        <h2>ğŸ”’ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <div class="input-group">
            <input type="text" id="userIn" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        </div>
        <div class="input-group">
            <input type="password" id="passIn" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        </div>
        <button class="btn-main" onclick="doLogin()">Ø¯Ø®ÙˆÙ„</button>
        <span class="toggle-link" onclick="swapAuth(true)">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</span>
    </div>

    <div class="auth-card" id="regBox" style="display: none;">
        <h2>ğŸ“ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
        <div class="input-group">
            <input type="text" id="userReg" placeholder="Ø§Ø®ØªØ± Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù…">
        </div>
        <div class="input-group">
            <input type="password" id="passReg" placeholder="Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±">
        </div>
        <button class="btn-main" style="background: var(--success);" onclick="doRegister()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        <span class="toggle-link" onclick="swapAuth(false)">Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ</span>
    </div>
</div>

<div id="mainContainer">
    <div class="header">
        <h2 style="margin: 0; color: var(--primary);">ğŸ“‚ Ø£Ø±Ø´ÙØ© Ù…Ù„ÙØ§Øª Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†</h2>
        <div style="text-align: left;">
            <span id="userNameDisplay" style="margin-left: 15px; font-weight: 600;"></span>
            <button onclick="location.reload()" style="background: var(--danger); color: white; border: none; padding: 8px 15px; border-radius: 10px; cursor: pointer;">Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>

    <div class="tool-box animate__animated animate__fadeInUp">
        <div class="input-group" style="margin: 0;">
            <label style="display: block; margin-bottom: 5px; font-size: 13px;">Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
            <input type="text" id="cName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
        </div>
        <div class="input-group" style="margin: 0;">
            <label style="display: block; margin-bottom: 5px; font-size: 13px;">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
            <input type="text" id="cPhone" placeholder="07xxxxxxxx">
        </div>
        <div class="input-group" style="margin: 0;">
            <label style="display: block; margin-bottom: 5px; font-size: 13px;">Ù…Ù„Ù PDF</label>
            <input type="file" id="cFile" accept=".pdf" style="padding: 8px;">
        </div>
        <button class="btn-main" onclick="addEntry()" style="margin-top: 18px;">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¬Ù„</button>
    </div>

    <div class="search-wrapper">
        <input type="text" id="searchInp" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ† Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„..." onkeyup="search()">
        <button class="btn-search" onclick="search()">Ø¨Ø­Ø« ğŸ”</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>Ø§Ù„ØªØ³Ù„Ø³Ù„</th>
                <th>Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</th>
                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<script>
    // --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ---
    let users = JSON.parse(localStorage.getItem('app_users')) || [];

    function swapAuth(isReg) {
        const lb = document.getElementById('loginBox');
        const rb = document.getElementById('regBox');
        if(isReg) {
            lb.className = "auth-card animate__animated animate__fadeOutLeft";
            setTimeout(() => {
                lb.style.display = 'none';
                rb.style.display = 'block';
                rb.className = "auth-card animate__animated animate__fadeInRight";
            }, 300);
        } else {
            rb.className = "auth-card animate__animated animate__fadeOutRight";
            setTimeout(() => {
                rb.style.display = 'none';
                lb.style.display = 'block';
                lb.className = "auth-card animate__animated animate__fadeInLeft";
            }, 300);
        }
    }

    function doRegister() {
        const u = document.getElementById('userReg').value;
        const p = document.getElementById('passReg').value;
        if(!u || !p) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„");
        if(users.find(x => x.u === u)) return alert("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯!");
        
        users.push({u, p});
        localStorage.setItem('app_users', JSON.stringify(users));
        alert("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†.");
        swapAuth(false);
    }

    function doLogin() {
        const u = document.getElementById('userIn').value;
        const p = document.getElementById('passIn').value;
        const found = users.find(x => x.u === u && x.p === p);

        if(found) {
            document.getElementById('authSection').className = "animate__animated animate__zoomOut";
            setTimeout(() => {
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('mainContainer').style.display = 'block';
                document.getElementById('userNameDisplay').innerText = "ğŸ‘¤ " + u;
                document.body.style.alignItems = "flex-start";
                document.body.style.paddingTop = "40px";
            }, 500);
        } else {
            const card = document.getElementById('loginBox');
            card.classList.add('animate__animated', 'animate__headShake');
            setTimeout(() => card.classList.remove('animate__headShake'), 500);
            alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");
        }
    }

    // --- Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø±Ø´ÙØ© ---
    let data = JSON.parse(localStorage.getItem('arch_data')) || [];
    let lastId = parseInt(localStorage.getItem('arch_id')) || 0;

    function addEntry() {
        const name = document.getElementById('cName').value;
        const phone = document.getElementById('cPhone').value;
        const file = document.getElementById('cFile').files[0];

        if(!name || !phone || !file) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„");

        const reader = new FileReader();
        reader.onload = (e) => {
            lastId++;
            data.push({ id: lastId, name, phone, pdf: e.target.result });
            localStorage.setItem('arch_id', lastId);
            save();
            // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('cName').value = '';
            document.getElementById('cPhone').value = '';
            document.getElementById('cFile').value = '';
        };
        reader.readAsDataURL(file);
    }

    function save() {
        localStorage.setItem('arch_data', JSON.stringify(data));
        render();
    }

    function render(list = data) {
        const body = document.getElementById('tableBody');
        body.innerHTML = '';
        list.forEach(item => {
            const row = document.createElement('tr');
            row.className = "animate__animated animate__fadeIn";
            row.innerHTML = `
                <td><span class="seq-badge">${item.id}</span></td>
                <td><b>${item.name}</b></td>
                <td>${item.phone}</td>
                <td class="action-btns">
                    <button style="background: var(--primary); color:white;" onclick="view('${item.pdf}')">ğŸ‘ï¸ Ø¹Ø±Ø¶</button>
                    <button style="background: var(--danger); color:white;" onclick="del(${item.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                </td>
            `;
            body.appendChild(row);
        });
    }

    function view(pdf) {
        const win = window.open();
        win.document.write(`<iframe src="${pdf}" frameborder="0" style="width:100%; height:100%;"></iframe>`);
    }

    function del(id) {
        if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¬Ù„ØŸ")) {
            data = data.filter(x => x.id !== id);
            save();
        }
    }

    function search() {
        const q = document.getElementById('searchInp').value.toLowerCase();
        const filtered = data.filter(x => x.name.toLowerCase().includes(q) || x.id.toString().includes(q));
        render(filtered);
    }

    render();
</script>
</body>
</html>